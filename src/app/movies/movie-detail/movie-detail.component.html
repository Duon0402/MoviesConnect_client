<!-- movie detail -->
<div class="card">
  <div *ngIf="movie" class="card-body mt-3">
    <div class="row">
      <div class="col-md-4">
        <img
          class="banner img-fluid m-2"
          src="{{ movie.banner?.url }}"
          alt="{{ movie.title }}"
        />
      </div>
      <div class="col-md-8">
        <div class="d-flex justify-content-between">
          <h1>{{ movie.title }}</h1>
          <i class="btn bi bi-three-dots" (click)="openReportFormMovie()"></i>
        </div>
        <div class="summary-scroll">
          <p class="text-muted">
            <strong>Summary:</strong><br />
            {{ movie.summary }} minutes
          </p>
        </div>
        <p class="text-muted">
          <strong>Duration:</strong> {{ movie.durationMinutes }} minutes
        </p>
        <p class="text-muted">
          <strong>Release Date:</strong>
          {{ movie.releaseDate | date : "dd/MM/yyyy" }}
        </p>
        <p class="text-muted"><strong>Status:</strong> {{ movie.status }}</p>
        <div *ngIf="movie.genres && movie.genres.length > 0">
          <p class="text-muted"><strong>Genres:</strong></p>
          <div class="row">
            <ul class="list-unstyled d-flex flex-wrap">
              <li
                *ngFor="let genre of movie.genres"
                class="me-2 badge bg-primary"
              >
                {{ genre.name }}
              </li>
            </ul>
          </div>
        </div>
        <div *ngIf="movie.certification">
          <p
            class="text-muted"
            (mouseenter)="showCertificationInfo = true"
            (mouseleave)="showCertificationInfo = false"
          >
            <strong>Certification: </strong>
            <span class="certi me-2 badge bg-primary">{{
              movie.certification.name
            }}</span>
            <span *ngIf="showCertificationInfo">
              {{ movie.certification.description }}
              ({{ movie.certification.minimumAge }}+)
            </span>
          </p>
        </div>
        <div class="row mt-3">
          <p class="card-text">
            <i class="bi bi-star-fill text-warning me-2"></i>
            <span style="margin-top: 5px"
              >{{ movie.averageRating?.toFixed(1) }} ({{
                movie.totalRatings
              }})</span
            >
          </p>
        </div>
        <div class="col mt-3 me-3">
          <button
            type="button"
            class="btn btn-outline-primary me-5"
            (click)="openRatingDialog()"
          >
            <i class="bi bi-star me-1"></i> Rate
          </button>
          <div
            *ngIf="!movie.isInWatchlist"
            class="btn btn-outline-primary align-self-center"
            (click)="addToWatchlist(movie.id)"
          >
            <i class="bi bi-plus"><span>Watchlist</span></i>
          </div>
          <div
            *ngIf="movie.isInWatchlist"
            class="btn btn-primary align-self-center"
            (click)="removeFromWatchlist(movie.id)"
          >
            <i class="bi bi-check2"><span>Watchlist</span></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ratings -->
<div class="card">
  <div class="card-body" *ngIf="movie">
    <div class="mt-3 d-flex justify-content-between align-items-center">
      <button
        class="btn"
        [class.btn-outline-primary]="!showRatings"
        [class.btn-primary]="showRatings"
        (click)="toggleRatings()"
      >
        {{ showRatings ? "Hide All Ratings" : "Show All Ratings" }}
      </button>
      <i
        *ngIf="showRatings"
        class="bi bi-funnel btn btn-outline-primary"
        (click)="openFilterRating()"
      ></i>
    </div>
    <div class="mt-3" *ngIf="showRatings">
      <app-rating-list
        [ratings]="ratings"
        [movieId]="movie.id"
      ></app-rating-list>
    </div>
  </div>
</div>
<!-- director -->
<div class="card">
  <div class="card-body">
    <h5 class="card-title">Directors</h5>
    <div class="row">
      <div class="col">
        <div class="col-lg-2 mt-3 mb-3">
          <app-director-card [director]="director"></app-director-card>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- actors -->
<div class="card">
  <div class="card-body">
    <h5 class="card-title">Actors</h5>
    <div class="row">
      <div class="col">
        <app-actor-carousel
          [movieId]="movieId"
          [id]="'actors'"
        ></app-actor-carousel>
      </div>
    </div>
  </div>
</div>


